# 答题卡

## 1 总训练时间与理想时间

### 1.1
根据 Gpipe 的调度规则，推导总执行时间 \( T_{\text{total}} \)

采用 Gpipe 策略时，模型被划分为 \( p = 4 \) 个阶段，每个阶段在一个 GPU 上进行流水线式的前向传播与反向传播。根据调度策略，总训练时间为：

\[
T_{\text{total}} = (m + p - 1) \cdot t_f + (m + p - 1) \cdot t_b = (m + p - 1)(t_f + t_b)
\]


计算得到：

\[
T_{\text{total}} = (8 + 4 - 1)(2 + 4) = 11 \cdot 6 = \boxed{66 \, \text{ms}}
\]

### 1.2
\[
T_{\text{ideal}} = \frac{m \cdot (t_f + t_b)}{p}
\]

代入题目数值：

\[
T_{\text{ideal}} = \frac{8 \cdot (2 + 4)}{4} = \frac{48}{4} = \boxed{12 \, \text{ms}}
\]

### 1.3
\[
\text{Bubble Ratio} = \frac{T_{\text{total}}}{T_{\text{ideal}}}
\]

代入计算：

\[
\text{Bubble Ratio} = \frac{66}{12} = \boxed{5.5}
\]

## 2 若将 microbatch 数增加为 $$m = 16$$，bubble ratio 会如何变化？请分析并说明原因
当 microbatch 数量增加到 m=16 时，Bubble Ratio 会下降，即流水线效率提高。这是因为 Gpipe 中的流水线开销（如启动和收尾的空闲阶段）是固定的，当 microbatch 增多时，这部分开销在总执行时间中所占比例变小，从而使得计算资源的利用率更高，因此 Bubble Ratio 变小，说明流水线效率提高了

## 3. 与 Gpipe 相比，1F1B 调度策略在哪些方面优化了流水线利用率？
与 Gpipe 策略相比，1F1B 调度策略在流水线利用率方面更优，因为它将前向传播和反向传播交错执行。具体来说，1F1B 每进行一次前向传播就接着执行一个已完成前向传播的 microbatch 的反向传播，这种交错方式减少了流水线中 GPU 的空闲时间（bubble），从而提升了整体并行度和资源利用率。相比之下，Gpipe 需等待所有前向传播完成后再开始反向传播，导致利用率较低。
